---
title: Vulnerability assessments for JFrog Artifactory external registry with Microsoft Defender Vulnerability Management
description: Configure vulnerability assessments for JFrog Artifactory as an external registry with Microsoft Defender Vulnerability Management.
ms.author: a-ehorwitz
ms.date: 09/01/2024
ms.topic: how-to
---

# Vulnerability assessment for the JFrog Artifactory (Cloud) external registry with Microsoft Defender Vulnerability Management

Microsoft Defender for Containers provides inventory discovery and vulnerability assessment of a container image throughout its lifecycle, from code development to cloud deployment. Defender for Containers protects the JFrog Artifactory (Cloud) container registry images with the same security capabilities available for the cloud-native registry images in Azure Container Registry (ACR), Elastic Container Registry (ECR), and Google Container Registry (GCR).

## Security Capabilities

**Inventory** – Identifies and lists all available container images within the JFrog Artifactory tenant.

**Vulnerability assessment** – Regularly scans the JFrog Artifactory tenant for supported container images, identifies vulnerabilities, and provides recommendations for issues to be remediated.

## Prerequisites

To enable vulnerability assessment for your JFrog Artifactory, a JFrog connector must be configured. As part of the configuration, the JFrog connector generates a script to be executed using the [JFrog CLI](https://docs.jfrog-applications.jfrog.io/jfrog-applications/jfrog-cli). The script can run from a Windows, Linux, or macOS environment.

The following are necessary to generate and execute the script:

- You must have administrative access to your JFrog Artifactory tenant.
- The [JFrog CLI must be installed](https://docs.jfrog-applications.jfrog.io/jfrog-applications/jfrog-cli/install).
- The [jq JSON parser must be installed](https://jqlang.github.io/jq/).

## Onboarding of JFrog Artifactory environment

You must have **Security administrator** or **Global administration** privileges in Defender for Cloud to add a JFrog Artifactory environment.

:::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/1-env.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/1-env.jpg" alt-text="Screenshot of Defender for Cloud environments panel showing the JFrog environment selection.":::

> [!NOTE]
> Each connector corresponds to only one JFrog Artifactory tenant. You should create a connector for each tenant that is to have security coverage in order to achieve optimal security coverage.

**The JFrog environment wizard assists with the onboarding process:**

1. Connector Details

    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/2-connector-details.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/2-connector-details.jpg" alt-text="Screenshot of the JFrog wizard showing the JFrog connector fields to populate.":::

    **Connector name:** Specify a unique connector name.
   
    **Location:** Specify the geographic location where Defender for Cloud stores the data associated with this connector.
   
    **Subscription:** The hosting subscription that defines the RBAC scope and billing entity for the JFrog Artifactory environment.
   
    **Resource group:** For RBAC purposes.
        
    **Scanning intervals:**  Set the container registry scan interval with hourly precision.
   
    **Server ID:** The prefix of the customer's JFrog Artifactory account URL. 

    > [!NOTE]
    > A single subscription can be linked to one JFrog Artifactory environment instance, although container images from this instance may be deployed to multiple environments that are overseen by Defender for Cloud, outside the boundaries of the associated subscription.

2. Select Plans
   
     Multiple plans exist for this environment. Select the desired plan:
     
    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/3-plans.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/3-plans.jpg" alt-text="Screenshot of the possible plans to enable for JFrog Repository vulnerability assessment.":::

    **Foundational CSPM:** Basic plan available for all customers, providing inventory capabilities only.
    
    **Containers:** Offers inventory and vulnerability assessment features.  
    
    **Defender CSPM:** Offers inventory and vulnerability assessment features, and other capabilities like attack path analysis and code-to-cloud mapping.
    
    > [!NOTE] 
    > For information regarding the plan pricing review [Microsoft Defender for Cloud pricing](https://azure.microsoft.com/pricing/details/defender-for-cloud/). Ensure your JFrog Artifactory environment plans are in sync with your cloud environment plans and share the same subscription to maximize coverage.
    
3. Configure Access
    
    Download the relevant installation script for the environment running the script (**Windows**, or **Linux/macOS** )

    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/4-configure-access.png" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/4-configure-access.png" alt-text="Screenshot of the field selections to generate the connection script, depending on the OS environment executing the script.":::

    Execute the connector script using the [JFrog CLI.](https://docs.jfrog-applications.jfrog.io/jfrog-applications/jfrog-cli)

4. Review and generate

    Review the configured connector details before generating the JFrog connector.
    
    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/4-review-and-generate.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/4-review-and-generate.jpg" alt-text="Screenshot of the JFrog connector details.":::
    
5. Validate connectivity  

    Verify the connection is successful and displayed on the environment settings screen.
    
    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/5-finalization.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/5-finalization.jpg" alt-text="Screenshot of the environments showing the JFrog Connector environment is listed.":::
    
6. Validate the feature is working properly
   
    > [!NOTE] 
    > Scanning of the JFrog Artifactory is initiated within one hour of onboarding.
    
    - **Inventory** – Make sure your see JFrog Artifactory container images in the **Defender for Cloud > Inventory** view
    
    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/6-inventory.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/6-inventory.jpg" alt-text="Screenshot showing the JFrog resource listed in the inventory.":::

    -  **Vulnerability Assessment** – Ensure you receive the recommendation "[Preview] Container images in JFrog Artifactory registry should have vulnerability findings resolved" to address security issues in your JFrog Artifactory container images.
    
    :::image type="content" source="media/agentless-vulnerability-assessment-jfrog-artifactory/7-recommendations.jpg" lightbox="media/agentless-vulnerability-assessment-jfrog-artifactory/7-recommendations.jpg" alt-text="Screenshot showing the recommendations for JFrog registry container images.":::

## Related content

- [Overview of Container security in Microsoft Defender for Containers](/azure/defender-for-cloud/defender-for-containers-introduction)
- [How-to view and remediate vulnerability assessment findings for registry images](/azure/defender-for-cloud/view-and-remediate-vulnerability-registry-images)
