---
title: Find vulnerabilities in your Azure SQL databases
description: Learn how to find and remediate software vulnerabilities using SQL vulnerability assessment (express and classic configurations) on Azure SQL Database, Azure SQL Managed Instance, and Azure Synapse Analytics.
author: Elazark
ms.author: elkrieger
ms.date: 11/05/2025
ms.service: defender-for-cloud
ms.topic: how-to
---

# Find and fix vulnerabilities in your Azure SQL databases

Microsoft Defender for Cloud provides [SQL vulnerability assessment](sql-azure-vulnerability-assessment-overview.md) for your Azure SQL databases. SQL vulnerability assessment scans your databases for software vulnerabilities and provides a list of findings. Use the findings to fix software vulnerabilities and disable findings.

SQL vulnerability assessment is available in two configurations: **express** (managed storage in the logical server region) and **classic** (user-owned storage account in a chosen region).

## Prerequisites

Make sure that you know whether you're using the [express or classic configurations](sql-azure-vulnerability-assessment-overview.md#what-are-the-express-and-classic-configurations) before you continue.

To see which configuration you're using:

1. In the [Azure portal](https://portal.azure.com), open the specific resource in Azure SQL Database, SQL Managed Instance Database, or Azure Synapse.
1. Under the **Security** heading, select **Defender for Cloud**.
1. In the **Enablement Status**, select **Configure** to open the Microsoft Defender for SQL settings pane for either the entire server or managed instance.

If the vulnerability settings show the option to configure a storage account, you're using the classic configuration. If not, you're using the express configuration.

## Understanding express and classic configurations

Both configurations provide the same vulnerability scanning capabilities but differ in how and where scan results are stored. This affects permissions, data residency, and how quickly baseline changes are reflected.

### [Express configuration](#tab/express)

**Scope:** Stores scan results in the same Azure region as the logical SQL server. Microsoft Defender for Cloud fully manages storage (no user-owned storage account required).

#### Express configuration: permissions and data residency

| Task | Required roles |
|------|------------------|
| View SQL vulnerability assessment results in Microsoft Defender for Cloud recommendations | Security Admin OR Security Reader |
| Change SQL vulnerability assessment settings | SQL Security Manager |
| Access scan results from automated email links or view resource-level scan results | SQL Security Manager |

**Data residency:** SQL Vulnerability Assessment queries the SQL server by using publicly available queries under Defender for Cloud recommendations and stores the query results in the same Azure region as the logical server. For example, if you enable vulnerability assessment on a logical server in West Europe, the scan results are stored in West Europe. Data is collected only when you enable SQL Vulnerability Assessment on the server.

### [Classic configuration](#tab/classic)

**Scope:** Stores scan results in a user-owned Azure Storage account that you configure. You control region, access, and resiliency. You're responsible for securing the storage account.

#### Classic configuration: permissions and data residency

| Task | Required roles |
|------|------------------|
| View SQL vulnerability assessment results in Microsoft Defender for Cloud recommendations | Security Admin OR Security Reader |
| Change SQL vulnerability assessment settings | SQL Security Manager AND Storage Blob Data Reader AND Owner (on storage account) |
| Access scan results from automated email links or view resource-level scan results | SQL Security Manager AND Storage Blob Data Reader |

**Data residency:** SQL Vulnerability Assessment queries the SQL server by using publicly available queries under Defender for Cloud recommendations and stores the query results in the user-owned storage account that you configure. The region is determined by the location of the storage account. You're responsible for the security and resiliency of the storage account.

---

### Configuration comparison summary

The table compares the key differences between the configurations:

| Feature | Express | Classic |
|---------|---------|----------|
| Storage location | Logical server region | User-selected storage account region |
| Storage ownership | Microsoft-managed | Customer-managed |
| Additional roles beyond SQL Security Manager | None | Storage Blob Data Reader (view email-linked results);</br>Owner + Storage Blob Data Reader (change settings) |
| Baseline refresh needed | No (immediate) | Yes (run new scan) |
| Data residency control | Fixed to server region | Configurable via storage account location |

## Run scans and manage baselines

Both configurations use the same scan workflow. The key difference is when they apply the baselines. Express configuration applies it immediately, and classic configuration applies it after you run a new scan.

### Perform an on-demand scan

1. From the resource's **Defender for Cloud** page, select **View additional findings in Vulnerability Assessment** to access previous scan results.
   
   :::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/view-additional-findings-link.png" alt-text="Screenshot of opening the scan results and manual scan options." lightbox="media/defender-for-sql-azure-vulnerability-assessment/view-additional-findings-link.png":::

1. Select **Scan** from the toolbar to run an on-demand SQL vulnerability assessment.
   
   :::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/on-demand-vulnerability-scan.png" alt-text="Screenshot of selecting scan to run an on-demand vulnerability assessment scan of your SQL resource." lightbox="media/defender-for-sql-azure-vulnerability-assessment/on-demand-vulnerability-scan.png":::
1. (Optional) Mark acceptable findings as baseline.
1. View baseline-approved findings in subsequent results (timing differs by configuration).


### Manage baselines

After running a scan, you can mark acceptable findings as baseline to customize future scan results. Baseline-approved configurations are treated as passing in subsequent scans.

**Baseline outcome quick reference**

| Action | Express result timing | Classic result timing |
|--------|-----------------------|-----------------------|
| Approve finding as baseline | Immediately marked Passed | Marked Passed after next scan |

---

## Review and remediate vulnerabilities

Once a scan completes, the vulnerability assessment report provides a comprehensive view of your database security posture. Both configurations share the remediation workflow and baseline management. 

### Understand scan results

The vulnerability assessment report includes:

- An overview of your security state
- The number of issues found
- A severity summary of risks
- A list of findings for investigation

:::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/sample-sql-vulnerabilities-report.png" alt-text="Screenshot of sample scan report from the SQL vulnerability assessment scanner." lightbox="media/defender-for-sql-azure-vulnerability-assessment/sample-sql-vulnerabilities-report.png":::

### Remediation and baseline procedure

1. Review scan results to identify security issues relevant to your environment.

1. Select each failed result to view detailed information, including impact and failure reasons.

   > [!TIP]
   > Each finding's details page includes actionable remediation guidance to help you address the vulnerability.
   >
   > :::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/vulnerability-findings.png" alt-text="Screenshot of list of vulnerability assessment findings." lightbox="media/defender-for-sql-azure-vulnerability-assessment/vulnerability-findings.png":::
   >
   > :::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/examining-vulnerability-findings.png" alt-text="Screenshot of examining the findings from a vulnerability scan." lightbox="media/defender-for-sql-azure-vulnerability-assessment/examining-vulnerability-findings.png":::

1. Mark acceptable findings as baseline to prevent them from appearing as failures in future scans.
   
   :::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/baseline-approval.png" alt-text="Screenshot of approving a finding as a baseline for future scans." lightbox="media/defender-for-sql-azure-vulnerability-assessment/baseline-approval.png":::
1. View Passed status for baseline-approved findings:
   - **Express:** Appears immediately without a new scan.
   - **Classic:** Requires running another on-demand scan.
   :::image type="content" source="media/defender-for-sql-azure-vulnerability-assessment/passed-per-custom-baseline.png" alt-text="Screenshot of passed assessments indicating they passed per custom baseline." lightbox="media/defender-for-sql-azure-vulnerability-assessment/passed-per-custom-baseline.png":::

**Outcome:** SQL vulnerability assessment scan cycles help maintain a high security level and ensure compliance with organizational security policies.

---

## Troubleshoot common issues

Use this table to resolve common issues when working with SQL vulnerability assessment:

| Issue | Likely cause | Resolution |
|-------|--------------|------------|
| Scan results not visible | Missing viewer role | Ensure Security Admin or Security Reader role is assigned. |
| Can't change settings | Insufficient configuration role | Assign SQL Security Manager (and for classic: Owner + Storage Blob Data Reader on storage account). |
| Baseline not reflected (classic) | New scan not run yet | Run another on-demand scan to apply baseline changes. |
| Baseline not reflected (express) | Expectation mismatch | Baseline applies immediately; refresh the Vulnerability Assessment tab. |
| Access error opening email link (classic) | Storage role missing | Add Storage Blob Data Reader for the storage account containing scan results. |

---

## Next steps  

- Learn more about [Microsoft Defender for Azure SQL](defender-for-sql-introduction.md).
- Learn more about [data discovery and classification](/azure/azure-sql/database/data-discovery-and-classification-overview).
- Learn more about [storing vulnerability assessment scan results in a storage account accessible behind firewalls and VNets](/azure/azure-sql/database/sql-database-vulnerability-assessment-storage).
